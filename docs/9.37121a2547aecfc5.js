"use strict";(self.webpackChunkdatta_able_free_angular_admin_template=self.webpackChunkdatta_able_free_angular_admin_template||[]).push([[9],{2009:(q,b,l)=>{l.r(b),l.d(b,{default:()=>J});var g=l(2876),r=l(529),e=l(2340),f=l(8492),T=l(4333),t=l(1571),Z=l(9061),C=l(6895);function x(a,d){if(1&a&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t._UZ(7,"ngb-progressbar",9),t.qZA()()),2&a){const n=d.$implicit;t.xp6(2),t.Oqu(n.designation),t.xp6(2),t.Oqu(n.prix),t.xp6(2),t.Oqu(n.avancement+" %"),t.xp6(1),t.Q6J("value",n.avancement)}}let A=(()=>{class a{constructor(n,o){this.activeModal=n,this.http=o,this.form={etat:"termin\xe9"},this.loading=!1,this.error=!1}ngOnInit(){var n;console.log(this.id_reparation),null!=localStorage.getItem("user")&&(n=JSON.parse(localStorage.getItem("user")).token),this.fetchData(n)}fetchData(n){const o=new r.WM({Authorization:"Bearer "+n});this.http.get(`${e.N.baseUrl}/reparationbyid/${this.id_reparation}`,{headers:o}).subscribe(p=>{this.reparation=p,this.listedetails=this.reparation.details,console.log(this.listedetails)})}affecter(n){var o;console.log(n),null!=localStorage.getItem("user")&&(o=JSON.parse(localStorage.getItem("user")).token,console.log(o));let p=new r.WM({Authorization:"Bearer "+o});console.log("atyyy ehh "+n),this.http.post(`${e.N.baseUrl}/updateetat/${n}`,this.form,{headers:p}).subscribe(_=>{console.log(_),this.activeModal.close()})}test(n){console.log(n)}}return a.\u0275fac=function(n){return new(n||a)(t.Y36(Z.Kz),t.Y36(r.eN))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-form-modal"]],inputs:{id_reparation:"id_reparation"},decls:21,vars:1,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"table-responsive"],[1,"table","table-hover"],[4,"ngFor","ngForOf"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-dark"],["type","text-primary","height","7px",3,"value"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0)(1,"h4",1),t._uU(2,"Details r\xe9paration"),t.qZA(),t.TgZ(3,"button",2),t.NdJ("click",function(){return o.activeModal.dismiss("Cross click")}),t.TgZ(4,"span",3),t._uU(5,"\xd7"),t.qZA()()(),t.TgZ(6,"div",4)(7,"table",5)(8,"thead")(9,"tr")(10,"th"),t._uU(11,"Designation"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"Prix"),t.qZA(),t.TgZ(14,"th"),t._uU(15,"Avancement"),t.qZA()()(),t.TgZ(16,"tbody"),t.YNc(17,x,8,4,"tr",6),t.qZA()()(),t.TgZ(18,"div",7)(19,"button",8),t._uU(20,"Valider"),t.qZA()()),2&n&&(t.xp6(17),t.Q6J("ngForOf",o.listedetails))},dependencies:[C.sg,Z.Ly],encapsulation:2}),a})();var y=l(4128),U=l(4631);function s(a,d){1&a&&(t.TgZ(0,"button",17),t._UZ(1,"span",18),t._uU(2," facturation en cours... "),t.qZA())}function m(a,d){if(1&a){const n=t.EpF();t.TgZ(0,"button",19),t.NdJ("click",function(){t.CHM(n);const p=t.oxw(2).$implicit,_=t.oxw();return t.KtG(_.facturer(p))}),t._uU(1,"Facturer"),t.qZA()}}const i=function(){return["/facture/fiche"]};function c(a,d){if(1&a&&(t.TgZ(0,"button",20),t._uU(1,"Voir facture"),t.qZA()),2&a){const n=t.oxw(2).$implicit;t.Q6J("routerLink",t.DdM(2,i))("state",n)}}function u(a,d){if(1&a&&(t.TgZ(0,"td"),t.YNc(1,s,3,0,"button",14),t.YNc(2,m,2,0,"button",15),t.YNc(3,c,2,3,"button",16),t.qZA()),2&a){const n=t.oxw().$implicit,o=t.oxw();t.xp6(1),t.Q6J("ngIf",o.isLoading),t.xp6(1),t.Q6J("ngIf",null==n.facturer&&0==o.isLoading),t.xp6(1),t.Q6J("ngIf",1==n.facturer&&0==o.isLoading)}}function v(a,d){if(1&a){const n=t.EpF();t.TgZ(0,"tr")(1,"td",12),t.NdJ("click",function(){const _=t.CHM(n).$implicit,h=t.oxw();return t.KtG(h.openModal(_._id))}),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.qZA(),t.YNc(15,u,4,3,"td",13),t.qZA()}if(2&a){const n=d.$implicit,o=t.oxw();t.xp6(2),t.Oqu(n.modele+" "+n.matriculation),t.xp6(2),t.Oqu(n.designation),t.xp6(2),t.Oqu(n.date_depot),t.xp6(2),t.Oqu(n.datedebutreparation),t.xp6(2),t.Oqu(n.dateterminaison),t.xp6(2),t.Oqu(n.etat),t.xp6(2),t.Oqu(n.total),t.xp6(1),t.Q6J("ngIf",o.estFinancier)}}const I=function(){return{display:"flex","justify-content":"space-between"}},M=function(a){return{itemsPerPage:5,currentPage:a}};let J=(()=>{class a{constructor(n,o,p){this.http=n,this.router=o,this.modalService=p,this.estFinancier=!1,this.isLoading=!1}ngOnInit(){null!=localStorage.getItem("user")&&(this.token=JSON.parse(localStorage.getItem("user")).token,"finance"==JSON.parse(localStorage.getItem("user")).role&&(this.estFinancier=!0)),this.fetchData()}facturer(n){this.isLoading=!0;const o=new r.WM({Authorization:"Bearer "+this.token});var p={tablename:"facture",designation:n.designation,modele:n.modele,matriculation:n.matriculation,idreparation:n._id,nomclient:n.nomclient,dateFacture:(new Date).toLocaleDateString(),montant:n.total,payer:0,reste:n.total},_=this.http.post(`${e.N.baseUrl}/object`,p,{headers:o}),h=this.http.get(`${e.N.baseUrl}/reparation/facturer/${n._id}`,{headers:o});(0,y.D)([_,h]).subscribe(k=>{this.isLoading=!1,this.fetchData()})}ficheFacture(n){this.router.navigate(["/facture/fiche"])}fetchData(){const n=new r.WM({Authorization:"Bearer "+this.token});this.http.get(`${e.N.baseUrl}/reparationbyetat/termin\xe9`,{headers:n}).subscribe(o=>{this.reparations=o,console.log(this.reparations)})}search(n){0==n.length?this.fetchData():this.reparations=this.reparations.filter(o=>o.modele.toLowerCase().includes(n.toLowerCase())||o.matriculation.toLowerCase().includes(n.toLowerCase())||o.designation.toLowerCase().includes(n.toLowerCase()))}openModal(n){this.modalService.open(A).componentInstance.id_reparation=n}}return a.\u0275fac=function(n){return new(n||a)(t.Y36(r.eN),t.Y36(f.F0),t.Y36(Z.FF))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-basic-elements"]],standalone:!0,features:[t.jDz],decls:30,vars:9,consts:[[1,"row"],[1,"col-xl-12"],["cardTitle","Liste des voitures termin\xe9s","blockClass","table-border-style",3,"options"],[1,"container"],[1,"box",3,"ngStyle"],[1,"box-part"],["type","text","id","icon-search","placeholder","search . . ",1,"form-control","mb-4",3,"keyup"],["indice",""],[1,"table-responsive"],[1,"table","table-hover"],[4,"ngFor","ngForOf"],[3,"pageChange"],[3,"click"],[4,"ngIf"],["class","btn btn-primary","type","button","disabled","",4,"ngIf"],["class","btn btn-primary",3,"click",4,"ngIf"],["class","btn btn-primary",3,"routerLink","state",4,"ngIf"],["type","button","disabled","",1,"btn","btn-primary"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-primary",3,"routerLink","state"]],template:function(n,o){if(1&n){const p=t.EpF();t.TgZ(0,"div",0)(1,"div",1)(2,"app-card",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"input",6,7),t.NdJ("keyup",function(){t.CHM(p);const h=t.MAs(7);return t.KtG(o.search(h.value))}),t.qZA()()()(),t.TgZ(8,"div",8)(9,"table",9)(10,"thead")(11,"tr")(12,"th"),t._uU(13,"Voiture"),t.qZA(),t.TgZ(14,"th"),t._uU(15,"Designation"),t.qZA(),t.TgZ(16,"th"),t._uU(17,"Date depot"),t.qZA(),t.TgZ(18,"th"),t._uU(19,"Date de debut du reparation"),t.qZA(),t.TgZ(20,"th"),t._uU(21,"Date de fin du reparation"),t.qZA(),t.TgZ(22,"th"),t._uU(23,"Etat"),t.qZA(),t.TgZ(24,"th"),t._uU(25,"Total"),t.qZA()()(),t.TgZ(26,"tbody"),t.YNc(27,v,16,8,"tr",10),t.ALo(28,"paginate"),t.qZA(),t.TgZ(29,"pagination-controls",11),t.NdJ("pageChange",function(h){return o.p=h}),t.qZA()()()()()()}2&n&&(t.xp6(2),t.Q6J("options",!1),t.xp6(2),t.Q6J("ngStyle",t.DdM(6,I)),t.xp6(23),t.Q6J("ngForOf",t.xi3(28,3,o.reparations,t.VKq(7,M,o.p))))},dependencies:[g.m,C.sg,C.O5,C.PC,U.A,f.Bz,f.rH,T.JX,T._s,T.LS]}),a})()},4631:(q,b,l)=>{l.d(b,{A:()=>U});var g=l(9061),r=l(7340),e=l(1571),f=l(6895);function T(s,m){if(1&s&&(e.TgZ(0,"h5"),e._uU(1),e.qZA()),2&s){const i=e.oxw(2);e.xp6(1),e.Oqu(i.cardTitle)}}function t(s,m){if(1&s){const i=e.EpF();e.TgZ(0,"div",8)(1,"div",9)(2,"button",10),e._UZ(3,"i",11),e.qZA(),e.TgZ(4,"ul",12)(5,"li",13),e.NdJ("click",function(){e.CHM(i);const u=e.oxw(2),v=e.MAs(1);return e.KtG(u.fullCardToggle(v,"",!0))}),e.TgZ(6,"a",14)(7,"span"),e._UZ(8,"i",15),e._uU(9),e.qZA()()(),e.TgZ(10,"li",16),e.NdJ("click",function(u){e.CHM(i);const v=e.oxw(2);return e.KtG(v.collapsedCardToggle(u))}),e.TgZ(11,"a",14)(12,"span"),e._UZ(13,"i",15),e._uU(14),e.qZA(),e.TgZ(15,"span",17),e._UZ(16,"i",18),e.qZA()()(),e.TgZ(17,"li",19),e.NdJ("click",function(){e.CHM(i);const u=e.oxw(2);return e.KtG(u.cardRefresh())}),e.TgZ(18,"a",14),e._UZ(19,"i",20),e._uU(20," Reload"),e.qZA()(),e.TgZ(21,"li",21),e.NdJ("click",function(){e.CHM(i);const u=e.oxw(2);return e.KtG(u.cardRemoveAction())}),e.TgZ(22,"a",14),e._UZ(23,"i",22),e._uU(24," Remove"),e.qZA()()()()()}if(2&s){const i=e.oxw(2);e.xp6(8),e.Q6J("ngClass",i.fullIcon),e.xp6(1),e.hij(" ","full-card"===i.cardClass?"Restore":"Maximize",""),e.xp6(4),e.Q6J("ngClass",i.collapsedIcon),e.xp6(1),e.hij(" ","collapsed"===i.collapsedCard?"Expand":"Collapse"," ")}}function Z(s,m){1&s&&e.Hsn(0,1,["*ngIf","customHeader"])}function C(s,m){if(1&s&&(e.TgZ(0,"div",5),e.YNc(1,T,2,1,"h5",6),e.YNc(2,t,25,4,"div",7),e.YNc(3,Z,1,0,"ng-content",6),e.qZA()),2&s){const i=e.oxw();e.Q6J("ngClass",i.headerClass),e.xp6(1),e.Q6J("ngIf",!i.customHeader),e.xp6(1),e.Q6J("ngIf",i.options&&!i.customHeader),e.xp6(1),e.Q6J("ngIf",i.customHeader)}}function x(s,m){1&s&&(e.TgZ(0,"div",23),e._UZ(1,"i",24),e.qZA())}const A=["*",[["",8,"app-card-header"]]],y=["*",".app-card-header"];let U=(()=>{class s{constructor(i){i.placement="bottom-right",this.customHeader=!1,this.options=!0,this.hidHeader=!1,this.cardTitle="Card Title",this.fullIcon="icon-maximize",this.isAnimating=!1,this.collapsedCard="expanded",this.collapsedIcon="icon-minus",this.loadCard=!1,this.cardRemove="open"}ngOnInit(){(!this.options||this.hidHeader||this.customHeader)&&(this.collapsedCard="false")}fullCardToggle(i,c,u){c="full-card"===this.cardClass?"zoomOut":"zoomIn",this.fullIcon="full-card"===this.cardClass?"icon-maximize":"icon-minimize",this.cardClass="full-card"===this.cardClass?this.cardClass:"full-card",u&&(this.animation=c),this.isAnimating=!0,setTimeout(()=>{this.cardClass="zoomOut"===c?"":this.cardClass,"full-card"===this.cardClass?document.querySelector("body").style.overflow="hidden":document.querySelector("body").removeAttribute("style")},500)}collapsedCardToggle(i){this.collapsedCard="collapsed"===this.collapsedCard?"expanded":"collapsed",this.collapsedIcon="collapsed"===this.collapsedCard?"icon-plus":"icon-minus"}cardRefresh(){this.loadCard=!0,this.cardClass="card-load",setTimeout(()=>{this.loadCard=!1,this.cardClass="expanded"},3e3)}cardRemoveAction(){this.cardRemove="closed"===this.cardRemove?"open":"closed"}}return s.\u0275fac=function(i){return new(i||s)(e.Y36(g.jL))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-card"]],inputs:{cardTitle:"cardTitle",cardClass:"cardClass",blockClass:"blockClass",headerClass:"headerClass",options:"options",hidHeader:"hidHeader",customHeader:"customHeader"},features:[e._Bn([g.jL])],ngContentSelectors:y,decls:7,vars:6,consts:[[1,"card",3,"ngClass"],["toAnimate",""],["class","card-header",3,"ngClass",4,"ngIf"],[1,"card-block",3,"ngClass"],["class","card-loader",4,"ngIf"],[1,"card-header",3,"ngClass"],[4,"ngIf"],["class","card-header-right",4,"ngIf"],[1,"card-header-right"],["ngbDropdown","",1,"btn-group","card-option","dropdown"],["type","button","ngbDropdownToggle","",1,"btn","dropdown-toggle","btn-icon"],[1,"feather","icon-more-horizontal"],["ngbDropdownMenu","",1,"list-unstyled","card-option","dropdown-menu","dropdown-menu-right"],[1,"dropdown-item","full-card",3,"click"],["href","javascript:"],[1,"feather",3,"ngClass"],[1,"dropdown-item","minimize-card",3,"click"],[2,"display","none"],[1,"feather","icon-plus"],[1,"dropdown-item","reload-card",3,"click"],[1,"feather","icon-refresh-cw"],[1,"dropdown-item","close-card",3,"click"],[1,"feather","icon-trash"],[1,"card-loader"],[1,"pct-loader1","anim-rotate"]],template:function(i,c){1&i&&(e.F$t(A),e.TgZ(0,"div",0,1),e.YNc(2,C,4,4,"div",2),e.TgZ(3,"div")(4,"div",3),e.Hsn(5),e.qZA()(),e.YNc(6,x,2,0,"div",4),e.qZA()),2&i&&(e.Q6J("ngClass",c.cardClass)("@cardRemove",c.cardRemove),e.xp6(2),e.Q6J("ngIf",!c.hidHeader),e.xp6(1),e.Q6J("@collapsedCard",c.collapsedCard),e.xp6(1),e.Q6J("ngClass",c.blockClass),e.xp6(2),e.Q6J("ngIf",c.loadCard))},dependencies:[f.mk,f.O5,g.jt,g.iD,g.Vi],styles:[".card.full-card[_ngcontent-%COMP%]{position:fixed!important;top:0!important;left:0!important;z-index:99999;border-radius:0;width:100vw!important;height:100vh!important}"],data:{animation:[(0,r.X$)("collapsedCard",[(0,r.SB)("collapsed, void",(0,r.oB)({overflow:"hidden",height:"0px"})),(0,r.SB)("expanded",(0,r.oB)({overflow:"hidden",height:r.l3})),(0,r.eR)("collapsed <=> expanded",[(0,r.jt)("400ms ease-in-out")])]),(0,r.X$)("cardRemove",[(0,r.SB)("open",(0,r.oB)({opacity:1})),(0,r.SB)("closed",(0,r.oB)({opacity:0,display:"none"})),(0,r.eR)("open <=> closed",(0,r.jt)("400ms"))])]}}),s})()}}]);