"use strict";(self.webpackChunkdatta_able_free_angular_admin_template=self.webpackChunkdatta_able_free_angular_admin_template||[]).push([[147],{8062:(q,T,l)=>{l.r(T),l.d(T,{default:()=>w});var p=l(6895),c=l(2876),e=l(529),h=l(2340),t=l(1571),v=l(9061),x=l(9922),b=l(8492);function A(o,r){1&o&&(t.TgZ(0,"div",18),t._uU(1," Montant superieur a la reste a payer ! "),t.qZA())}function U(o,r){1&o&&(t.TgZ(0,"button",19),t._UZ(1,"span",20),t._uU(2," Paiement en cours... "),t.qZA())}function M(o,r){if(1&o){const a=t.EpF();t.TgZ(0,"button",21),t.NdJ("click",function(){t.CHM(a);const d=t.oxw(),_=t.MAs(13),Z=t.MAs(19),Q=t.MAs(25);return t.KtG(d.payer(_.value,Z.value,Q.value))}),t._uU(1,"Valider"),t.qZA()}}let y=(()=>{class o{constructor(a,n,d){this.activeModal=a,this.dataService=n,this.router=d,this.loading=!1,this.error=!1,this.erreurMotant=!1}ngOnInit(){null!=localStorage.getItem("user")&&(this.token=JSON.parse(localStorage.getItem("user")).token)}payer(a,n,d){this.loading=!0,console.log(this.facture);var _={id:this.facture._id,montant:Number(d),designation:n,date:a};console.log("dataaa"+_);let Z=new e.WM({Authorization:"Bearer "+this.token});Number(d)>this.facture.reste?(this.erreurMotant=!0,this.loading=!1):(this.erreurMotant||(""!=_.designation&&0!=_.montant&&""!=_.date?(this.error=!1,this.dataService.addData(`${h.N.baseUrl}/paiement`,_,{headers:Z}),this.loading=!1):(this.error=!0,this.loading=!1),this.dataService.fetchData(`${h.N.baseUrl}/facture/${this.facture.idreparation}`,{headers:Z}),this.router.navigate(["/reparation/termine"]),this.activeModal.close()),this.erreurMotant=!1)}}return o.\u0275fac=function(a){return new(a||o)(t.Y36(v.Kz),t.Y36(x.D),t.Y36(b.F0))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-form-modal"]],inputs:{facture:"facture"},standalone:!0,features:[t.jDz],decls:32,vars:3,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"form-group"],["for","name"],["type","date","id","name","ng-model","currentDate",1,"form-control"],["date",""],["type","text","id","designation",1,"form-control"],["designation",""],["type","number","id","montant",1,"form-control"],["montant",""],[1,"form-group","text-start","mb-4"],["class","alert alert-danger alert-dismissible fade show","role","alert",4,"ngIf"],[1,"modal-footer"],["class","btn btn-primary","type","button","disabled","",4,"ngIf"],["type","button","class","btn btn-outline-dark",3,"click",4,"ngIf"],["role","alert",1,"alert","alert-danger","alert-dismissible","fade","show"],["type","button","disabled","",1,"btn","btn-primary"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],["type","button",1,"btn","btn-outline-dark",3,"click"]],template:function(a,n){1&a&&(t.TgZ(0,"div",0)(1,"h4",1),t._uU(2,"Saisie paiement"),t.qZA(),t.TgZ(3,"button",2),t.NdJ("click",function(){return n.activeModal.dismiss("Cross click")}),t.TgZ(4,"span",3),t._uU(5,"\xd7"),t.qZA()()(),t.TgZ(6,"div",4)(7,"form")(8,"div",5)(9,"label",6),t._uU(10,"Date paiement"),t.qZA(),t._UZ(11,"br")(12,"input",7,8),t.qZA(),t.TgZ(14,"div",5)(15,"label",6),t._uU(16,"Designation"),t.qZA(),t._UZ(17,"br")(18,"input",9,10),t.qZA(),t.TgZ(20,"div",5)(21,"label",6),t._uU(22,"Montant"),t.qZA(),t._UZ(23,"br")(24,"input",11,12),t.qZA(),t._UZ(26,"br"),t.TgZ(27,"div",13),t.YNc(28,A,2,0,"div",14),t.qZA()()(),t.TgZ(29,"div",15),t.YNc(30,U,3,0,"button",16),t.YNc(31,M,2,0,"button",17),t.qZA()),2&a&&(t.xp6(28),t.Q6J("ngIf",n.erreurMotant),t.xp6(2),t.Q6J("ngIf",n.loading),t.xp6(1),t.Q6J("ngIf",!n.loading))},dependencies:[p.ez,p.O5],encapsulation:2}),o})();function s(o,r){if(1&o&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t._UZ(7,"ngb-progressbar",11),t.qZA()()),2&o){const a=r.$implicit;t.xp6(2),t.Oqu(a.designation),t.xp6(2),t.Oqu(a.prix),t.xp6(2),t.hij(" ",a.avancement," % "),t.xp6(1),t.Q6J("value",a.avancement)}}function g(o,r){if(1&o&&(t.TgZ(0,"div",6)(1,"div",7)(2,"div",8)(3,"table",9)(4,"thead")(5,"tr")(6,"th"),t._uU(7,"Designation"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"Prix"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"Avancement"),t.qZA()()(),t.TgZ(12,"tbody"),t.YNc(13,s,8,4,"tr",10),t.qZA()()()()()),2&o){const a=t.oxw();t.xp6(13),t.Q6J("ngForOf",a.listedetails)}}function i(o,r){1&o&&(t.TgZ(0,"div",6)(1,"b",12),t._uU(2,"Aucun details \xe0 afficher."),t.qZA()())}let u=(()=>{class o{constructor(a,n){this.activeModal=a,this.http=n}ngOnInit(){var a;console.log(this.id_reparation),null!=localStorage.getItem("user")&&(a=JSON.parse(localStorage.getItem("user")).token),this.fetchData(a)}fetchData(a){const n=new e.WM({Authorization:"Bearer "+a});this.http.get(`${h.N.baseUrl}/reparationbyid/${this.id_reparation}`,{headers:n}).subscribe(d=>{this.reparation=d,this.listedetails=this.reparation.details,console.log(this.listedetails)})}}return o.\u0275fac=function(a){return new(a||o)(t.Y36(v.Kz),t.Y36(e.eN))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-details-modal"]],inputs:{id_reparation:"id_reparation"},standalone:!0,features:[t.jDz],decls:9,vars:2,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],["class","row",4,"ngIf"],[1,"row"],[1,"col-xl-12"],[1,"table-responsive"],[1,"table","table-hover"],[4,"ngFor","ngForOf"],["type","text-primary","height","7px",3,"value"],[1,"text-center"]],template:function(a,n){1&a&&(t.TgZ(0,"div",0)(1,"h4",1),t._uU(2,"Details r\xe9paration"),t.qZA(),t.TgZ(3,"button",2),t.NdJ("click",function(){return n.activeModal.dismiss("Cross click")}),t.TgZ(4,"span",3),t._uU(5,"\xd7"),t.qZA()()(),t.TgZ(6,"div",4),t.YNc(7,g,14,1,"div",5),t.qZA(),t.YNc(8,i,3,0,"div",5)),2&a&&(t.xp6(7),t.Q6J("ngIf",null!=n.listedetails),t.xp6(1),t.Q6J("ngIf",null==n.listedetails))},dependencies:[p.ez,p.sg,p.O5,c.m,v.Ly],styles:[".modal-body[_ngcontent-%COMP%]{width:100%;height:150%}"]}),o})();var m=l(4333),C=l(4004),D=l(4631);function F(o,r){if(1&o){const a=t.EpF();t.TgZ(0,"div",5)(1,"button",12),t.NdJ("click",function(){t.CHM(a);const d=t.oxw();return t.KtG(d.openModal(d.facture))}),t._uU(2,"Saisie paiement"),t.qZA()()}}const f=function(){return{display:"flex"}};function I(o,r){if(1&o&&(t.TgZ(0,"div")(1,"div",4)(2,"div",13)(3,"p",14),t._uU(4,"Designation : "),t.qZA()(),t.TgZ(5,"div",13)(6,"p",14),t._uU(7),t.qZA()()(),t.TgZ(8,"div",4)(9,"div",13)(10,"p",14),t._uU(11,"Voiture : "),t.qZA()(),t.TgZ(12,"div",13)(13,"p",14),t._uU(14),t.qZA()()(),t.TgZ(15,"div",4)(16,"div",13)(17,"p",14),t._uU(18,"Nom du client: "),t.qZA()(),t.TgZ(19,"div",13)(20,"p",14),t._uU(21),t.qZA()()(),t.TgZ(22,"div",4)(23,"div",13)(24,"p",14),t._uU(25,"Date : "),t.qZA()(),t.TgZ(26,"div",13)(27,"p",14),t._uU(28),t.qZA()()(),t.TgZ(29,"div",4)(30,"div",13)(31,"p",14),t._uU(32,"Net \xe0 payer : "),t.qZA()(),t.TgZ(33,"div",13)(34,"p",14),t._uU(35),t.qZA()()(),t.TgZ(36,"div",4)(37,"div",13)(38,"p",14),t._uU(39,"Montant payer : "),t.qZA()(),t.TgZ(40,"div",13)(41,"p",14),t._uU(42),t.qZA()()(),t.TgZ(43,"div",4)(44,"div",13)(45,"p",14),t._uU(46,"Reste \xe0 payer : "),t.qZA()(),t.TgZ(47,"div",13)(48,"p",14),t._uU(49),t.qZA()()()()),2&o){const a=t.oxw();t.xp6(1),t.Q6J("ngStyle",t.DdM(14,f)),t.xp6(6),t.hij(" ",a.facture.designation,""),t.xp6(1),t.Q6J("ngStyle",t.DdM(15,f)),t.xp6(6),t.hij(" ",a.facture.modele+" "+a.facture.matriculation,""),t.xp6(1),t.Q6J("ngStyle",t.DdM(16,f)),t.xp6(6),t.hij(" ",a.facture.nomclient,""),t.xp6(1),t.Q6J("ngStyle",t.DdM(17,f)),t.xp6(6),t.hij(" ",a.facture.dateFacture,""),t.xp6(1),t.Q6J("ngStyle",t.DdM(18,f)),t.xp6(6),t.hij(" ",a.facture.montant,""),t.xp6(1),t.Q6J("ngStyle",t.DdM(19,f)),t.xp6(6),t.hij(" ",a.facture.payer,""),t.xp6(1),t.Q6J("ngStyle",t.DdM(20,f)),t.xp6(6),t.hij(" ",a.facture.reste,"")}}function J(o,r){if(1&o){const a=t.EpF();t.TgZ(0,"tr",16),t.NdJ("click",function(){const _=t.CHM(a).$implicit,Z=t.oxw(2);return t.KtG(Z.openDetails(_._id))}),t.TgZ(1,"td"),t._uU(2),t.ALo(3,"date"),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.qZA()()}if(2&o){const a=r.$implicit;t.xp6(2),t.Oqu(t.xi3(3,3,a.date,"dd-MM-YYYY")),t.xp6(3),t.Oqu(a.designation),t.xp6(2),t.Oqu(a.montant)}}function N(o,r){1&o&&(t.TgZ(0,"tr"),t._UZ(1,"br"),t.TgZ(2,"b",8),t._uU(3,"Aucun paiement."),t.qZA()())}const S=function(o){return{itemsPerPage:5,currentPage:o}};function k(o,r){if(1&o&&(t.TgZ(0,"tbody"),t.YNc(1,J,8,6,"tr",15),t.ALo(2,"paginate"),t.YNc(3,N,4,0,"tr",7),t.qZA()),2&o){const a=t.oxw();t.xp6(1),t.Q6J("ngForOf",t.xi3(2,2,a.facture.paiement,t.VKq(5,S,a.p))),t.xp6(2),t.Q6J("ngIf",null==a.facture.paiement)}}const O=function(){return{display:"flex","justify-content":"space-between"}};let w=(()=>{class o{constructor(a,n,d){this.route=a,this.modalService=n,this.dataService=d,this.isClient=!1}ngOnInit(){this.state$=this.route.paramMap.pipe((0,C.U)(()=>window.history.state)),this.state$.subscribe(a=>{this.reparation=a}),null!=localStorage.getItem("user")&&(this.token=JSON.parse(localStorage.getItem("user")).token,"client"==JSON.parse(localStorage.getItem("user")).role&&(this.isClient=!0)),this.fetchData(this.reparation._id,this.token),this.dataService.data$.subscribe(a=>{this.facture=a})}fetchData(a,n){const d=new e.WM({Authorization:"Bearer "+n});this.dataService.fetchData(`${h.N.baseUrl}/facture/${a}`,{headers:d})}openModal(a){this.modalService.open(y).componentInstance.facture=a}openDetails(a){this.modalService.open(u).componentInstance.id_reparation=a}}return o.\u0275fac=function(a){return new(a||o)(t.Y36(b.gz),t.Y36(v.FF),t.Y36(x.D))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-tbl-bootstrap"]],standalone:!0,features:[t.jDz],decls:27,vars:6,consts:[[1,"row"],[1,"col-xl-12"],["cardTitle","Facture","blockClass","table-border-style",3,"options"],[1,"container"],[1,"box",3,"ngStyle"],[1,"box-part"],["class","box-part",4,"ngIf"],[4,"ngIf"],[1,"text-center"],[1,"table-responsive"],[1,"table","table-hover"],[3,"pageChange"],[1,"btn","btn-primary",3,"click"],[1,"col-md-3"],[1,"text-black"],[3,"click",4,"ngFor","ngForOf"],[3,"click"]],template:function(a,n){1&a&&(t.TgZ(0,"div",0)(1,"div",1)(2,"app-card",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h5"),t._uU(7,"Details facture"),t.qZA()(),t._UZ(8,"div",5),t.YNc(9,F,3,0,"div",6),t.qZA(),t.YNc(10,I,50,21,"div",7),t.qZA(),t._UZ(11,"hr"),t.TgZ(12,"h5",8),t._uU(13,"Paiement(s)"),t.qZA(),t._UZ(14,"br"),t.TgZ(15,"div",9)(16,"table",10)(17,"thead")(18,"tr")(19,"th"),t._uU(20,"Date"),t.qZA(),t.TgZ(21,"th"),t._uU(22,"Designation"),t.qZA(),t.TgZ(23,"th"),t._uU(24,"Montant"),t.qZA()()(),t.YNc(25,k,4,7,"tbody",7),t.TgZ(26,"pagination-controls",11),t.NdJ("pageChange",function(_){return n.p=_}),t.qZA()()()()()()),2&a&&(t.xp6(2),t.Q6J("options",!1),t.xp6(2),t.Q6J("ngStyle",t.DdM(5,O)),t.xp6(5),t.Q6J("ngIf",!n.isClient),t.xp6(1),t.Q6J("ngIf",null!=n.facture),t.xp6(15),t.Q6J("ngIf",null!=n.facture))},dependencies:[p.ez,p.sg,p.O5,p.PC,p.uU,c.m,D.A,m.JX,m._s,m.LS]}),o})()},4631:(q,T,l)=>{l.d(T,{A:()=>y});var p=l(9061),c=l(7340),e=l(1571),h=l(6895);function t(s,g){if(1&s&&(e.TgZ(0,"h5"),e._uU(1),e.qZA()),2&s){const i=e.oxw(2);e.xp6(1),e.Oqu(i.cardTitle)}}function v(s,g){if(1&s){const i=e.EpF();e.TgZ(0,"div",8)(1,"div",9)(2,"button",10),e._UZ(3,"i",11),e.qZA(),e.TgZ(4,"ul",12)(5,"li",13),e.NdJ("click",function(){e.CHM(i);const m=e.oxw(2),C=e.MAs(1);return e.KtG(m.fullCardToggle(C,"",!0))}),e.TgZ(6,"a",14)(7,"span"),e._UZ(8,"i",15),e._uU(9),e.qZA()()(),e.TgZ(10,"li",16),e.NdJ("click",function(m){e.CHM(i);const C=e.oxw(2);return e.KtG(C.collapsedCardToggle(m))}),e.TgZ(11,"a",14)(12,"span"),e._UZ(13,"i",15),e._uU(14),e.qZA(),e.TgZ(15,"span",17),e._UZ(16,"i",18),e.qZA()()(),e.TgZ(17,"li",19),e.NdJ("click",function(){e.CHM(i);const m=e.oxw(2);return e.KtG(m.cardRefresh())}),e.TgZ(18,"a",14),e._UZ(19,"i",20),e._uU(20," Reload"),e.qZA()(),e.TgZ(21,"li",21),e.NdJ("click",function(){e.CHM(i);const m=e.oxw(2);return e.KtG(m.cardRemoveAction())}),e.TgZ(22,"a",14),e._UZ(23,"i",22),e._uU(24," Remove"),e.qZA()()()()()}if(2&s){const i=e.oxw(2);e.xp6(8),e.Q6J("ngClass",i.fullIcon),e.xp6(1),e.hij(" ","full-card"===i.cardClass?"Restore":"Maximize",""),e.xp6(4),e.Q6J("ngClass",i.collapsedIcon),e.xp6(1),e.hij(" ","collapsed"===i.collapsedCard?"Expand":"Collapse"," ")}}function x(s,g){1&s&&e.Hsn(0,1,["*ngIf","customHeader"])}function b(s,g){if(1&s&&(e.TgZ(0,"div",5),e.YNc(1,t,2,1,"h5",6),e.YNc(2,v,25,4,"div",7),e.YNc(3,x,1,0,"ng-content",6),e.qZA()),2&s){const i=e.oxw();e.Q6J("ngClass",i.headerClass),e.xp6(1),e.Q6J("ngIf",!i.customHeader),e.xp6(1),e.Q6J("ngIf",i.options&&!i.customHeader),e.xp6(1),e.Q6J("ngIf",i.customHeader)}}function A(s,g){1&s&&(e.TgZ(0,"div",23),e._UZ(1,"i",24),e.qZA())}const U=["*",[["",8,"app-card-header"]]],M=["*",".app-card-header"];let y=(()=>{class s{constructor(i){i.placement="bottom-right",this.customHeader=!1,this.options=!0,this.hidHeader=!1,this.cardTitle="Card Title",this.fullIcon="icon-maximize",this.isAnimating=!1,this.collapsedCard="expanded",this.collapsedIcon="icon-minus",this.loadCard=!1,this.cardRemove="open"}ngOnInit(){(!this.options||this.hidHeader||this.customHeader)&&(this.collapsedCard="false")}fullCardToggle(i,u,m){u="full-card"===this.cardClass?"zoomOut":"zoomIn",this.fullIcon="full-card"===this.cardClass?"icon-maximize":"icon-minimize",this.cardClass="full-card"===this.cardClass?this.cardClass:"full-card",m&&(this.animation=u),this.isAnimating=!0,setTimeout(()=>{this.cardClass="zoomOut"===u?"":this.cardClass,"full-card"===this.cardClass?document.querySelector("body").style.overflow="hidden":document.querySelector("body").removeAttribute("style")},500)}collapsedCardToggle(i){this.collapsedCard="collapsed"===this.collapsedCard?"expanded":"collapsed",this.collapsedIcon="collapsed"===this.collapsedCard?"icon-plus":"icon-minus"}cardRefresh(){this.loadCard=!0,this.cardClass="card-load",setTimeout(()=>{this.loadCard=!1,this.cardClass="expanded"},3e3)}cardRemoveAction(){this.cardRemove="closed"===this.cardRemove?"open":"closed"}}return s.\u0275fac=function(i){return new(i||s)(e.Y36(p.jL))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-card"]],inputs:{cardTitle:"cardTitle",cardClass:"cardClass",blockClass:"blockClass",headerClass:"headerClass",options:"options",hidHeader:"hidHeader",customHeader:"customHeader"},features:[e._Bn([p.jL])],ngContentSelectors:M,decls:7,vars:6,consts:[[1,"card",3,"ngClass"],["toAnimate",""],["class","card-header",3,"ngClass",4,"ngIf"],[1,"card-block",3,"ngClass"],["class","card-loader",4,"ngIf"],[1,"card-header",3,"ngClass"],[4,"ngIf"],["class","card-header-right",4,"ngIf"],[1,"card-header-right"],["ngbDropdown","",1,"btn-group","card-option","dropdown"],["type","button","ngbDropdownToggle","",1,"btn","dropdown-toggle","btn-icon"],[1,"feather","icon-more-horizontal"],["ngbDropdownMenu","",1,"list-unstyled","card-option","dropdown-menu","dropdown-menu-right"],[1,"dropdown-item","full-card",3,"click"],["href","javascript:"],[1,"feather",3,"ngClass"],[1,"dropdown-item","minimize-card",3,"click"],[2,"display","none"],[1,"feather","icon-plus"],[1,"dropdown-item","reload-card",3,"click"],[1,"feather","icon-refresh-cw"],[1,"dropdown-item","close-card",3,"click"],[1,"feather","icon-trash"],[1,"card-loader"],[1,"pct-loader1","anim-rotate"]],template:function(i,u){1&i&&(e.F$t(U),e.TgZ(0,"div",0,1),e.YNc(2,b,4,4,"div",2),e.TgZ(3,"div")(4,"div",3),e.Hsn(5),e.qZA()(),e.YNc(6,A,2,0,"div",4),e.qZA()),2&i&&(e.Q6J("ngClass",u.cardClass)("@cardRemove",u.cardRemove),e.xp6(2),e.Q6J("ngIf",!u.hidHeader),e.xp6(1),e.Q6J("@collapsedCard",u.collapsedCard),e.xp6(1),e.Q6J("ngClass",u.blockClass),e.xp6(2),e.Q6J("ngIf",u.loadCard))},dependencies:[h.mk,h.O5,p.jt,p.iD,p.Vi],styles:[".card.full-card[_ngcontent-%COMP%]{position:fixed!important;top:0!important;left:0!important;z-index:99999;border-radius:0;width:100vw!important;height:100vh!important}"],data:{animation:[(0,c.X$)("collapsedCard",[(0,c.SB)("collapsed, void",(0,c.oB)({overflow:"hidden",height:"0px"})),(0,c.SB)("expanded",(0,c.oB)({overflow:"hidden",height:c.l3})),(0,c.eR)("collapsed <=> expanded",[(0,c.jt)("400ms ease-in-out")])]),(0,c.X$)("cardRemove",[(0,c.SB)("open",(0,c.oB)({opacity:1})),(0,c.SB)("closed",(0,c.oB)({opacity:0,display:"none"})),(0,c.eR)("open <=> closed",(0,c.jt)("400ms"))])]}}),s})()}}]);