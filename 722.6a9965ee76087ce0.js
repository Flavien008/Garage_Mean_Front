"use strict";(self.webpackChunkdatta_able_free_angular_admin_template=self.webpackChunkdatta_able_free_angular_admin_template||[]).push([[722],{90:(C,u,i)=>{i.r(u),i.d(u,{default:()=>J});var p=i(5861),g=i(6895),l=i(8492),r=i(4006),e=i(1571),c=i(262),m=i(2843),f=i(2340),h=i(529);let v=(()=>{class t{constructor(n){this.http=n}login(n){return console.log("call login function"),this.http.post(`${f.N.baseUrl}/login`,n).pipe((0,c.K)(o=>(console.log("An error occurred:",o),(0,m._)(o))))}}return t.\u0275fac=function(n){return new(n||t)(e.LFG(h.eN))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function S(t,a){1&t&&(e.TgZ(0,"div",20),e._uU(1," Veuillez vos informations ! "),e.qZA())}function Z(t,a){1&t&&(e.TgZ(0,"div",21)(1,"button",22),e._UZ(2,"span",23),e._uU(3," Login process... "),e.qZA()())}function b(t,a){1&t&&(e.TgZ(0,"button",24),e._uU(1,"Login"),e.qZA())}const A=function(){return["/auth/signup"]};let J=(()=>{class t{constructor(n,o){this.authService=n,this.router=o,this.defaultLog="Flavien",this.defaultPwd="1234",this.loginError=!1,this.isLoading=!1}ngOnInit(){this.initForm()}initForm(){this.loginGroup=new r.cw({login:new r.NI("",[r.kI.required]),password:new r.NI("",[r.kI.required])})}loginProcess(){var n=this;return(0,p.Z)(function*(){n.isLoading=!0,n.loginGroup.valid&&(yield n.authService.login(n.loginGroup.value).subscribe(o=>{n.loginError=!1,localStorage.setItem("user",JSON.stringify(o)),console.log("atooooo"+JSON.parse(localStorage.getItem("user")).role),"atelier"==JSON.parse(localStorage.getItem("user")).role&&(console.log(JSON.parse(localStorage.getItem("user")).role),n.router.navigate(["/reparation/liste"])),"client"==JSON.parse(localStorage.getItem("user")).role&&(console.log(JSON.parse(localStorage.getItem("user")).role),n.router.navigate(["/voiture/ajout"])),"finance"==JSON.parse(localStorage.getItem("user")).role&&(console.log(JSON.parse(localStorage.getItem("user")).role),n.router.navigate(["/dashboard"])),n.isLoading=!1},o=>{n.isLoading=!1,401==o.status&&(n.loginError=!0,console.log("V\xe9rifier vos informations ! "))}))})()}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(v),e.Y36(l.F0))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-auth-signin"]],standalone:!0,features:[e.jDz],decls:26,vars:8,consts:[[1,"auth-wrapper"],[1,"auth-content"],[1,"auth-bg"],[1,"r"],[1,"r","s"],[1,"card"],[1,"card-body","text-center"],[1,"mb-4"],[1,"feather","icon-unlock","auth-icon"],[3,"formGroup","ngSubmit"],[1,"input-group","mb-3"],["type","email","placeholder","Login","formControlName","login",1,"form-control",3,"ngModel","ngModelChange"],[1,"input-group","mb-4"],["type","password","placeholder","Password","formControlName","password",1,"form-control",3,"ngModel","ngModelChange"],[1,"form-group","text-start","mb-4"],["class","alert alert-danger alert-dismissible fade show","role","alert",4,"ngIf"],["class","text-center",4,"ngIf"],["class","btn btn-primary mb-4",4,"ngIf"],[1,"mb-0","text-muted"],[3,"routerLink"],["role","alert",1,"alert","alert-danger","alert-dismissible","fade","show"],[1,"text-center"],["type","button","disabled","",1,"btn","btn-primary"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],[1,"btn","btn-primary","mb-4"]],template:function(n,o){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._UZ(3,"span",3)(4,"span",4)(5,"span",4)(6,"span",3),e.qZA(),e.TgZ(7,"div",5)(8,"div",6)(9,"div",7),e._UZ(10,"i",8),e.qZA(),e.TgZ(11,"h3",7),e._uU(12,"Login"),e.qZA(),e.TgZ(13,"form",9),e.NdJ("ngSubmit",function(){return o.loginProcess()}),e.TgZ(14,"div",10)(15,"input",11),e.NdJ("ngModelChange",function(s){return o.defaultLog=s}),e.qZA()(),e.TgZ(16,"div",12)(17,"input",13),e.NdJ("ngModelChange",function(s){return o.defaultPwd=s}),e.qZA()(),e.TgZ(18,"div",14),e.YNc(19,S,2,0,"div",15),e.qZA(),e.YNc(20,Z,4,0,"div",16),e.YNc(21,b,2,0,"button",17),e.qZA(),e.TgZ(22,"p",18),e._uU(23," Don\u2019t have an account? "),e.TgZ(24,"a",19),e._uU(25,"Sign up"),e.qZA()()()()()()),2&n&&(e.xp6(13),e.Q6J("formGroup",o.loginGroup),e.xp6(2),e.Q6J("ngModel",o.defaultLog),e.xp6(2),e.Q6J("ngModel",o.defaultPwd),e.xp6(2),e.Q6J("ngIf",o.loginError),e.xp6(1),e.Q6J("ngIf",o.isLoading),e.xp6(1),e.Q6J("ngIf",!o.isLoading),e.xp6(3),e.Q6J("routerLink",e.DdM(7,A)))},dependencies:[g.ez,g.O5,l.Bz,l.rH,r.UX,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u]}),t})()}}]);